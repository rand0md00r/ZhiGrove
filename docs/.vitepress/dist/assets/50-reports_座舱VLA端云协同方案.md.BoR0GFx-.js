import{_ as i}from"./chunks/微信图片_20250902190851_4_51.DYDP96it.js";import{_ as a,c as t,o as n,ag as l}from"./chunks/framework.OaOo95RB.js";const h="/ZhiGrove/assets/TMRoPE.cTqjiqUP.png",F=JSON.parse('{"title":"云端VLA方案：快速落地 vs 最优路线 v1.0","description":"","frontmatter":{},"headers":[],"relativePath":"50-reports/座舱VLA端云协同方案.md","filePath":"50-reports/座舱VLA端云协同方案.md"}'),k={name:"50-reports/座舱VLA端云协同方案.md"};function p(o,s,e,r,E,g){return n(),t("div",null,[...s[0]||(s[0]=[l('<h1 id="云端vla方案-快速落地-vs-最优路线-v1-0" tabindex="-1">云端VLA方案：快速落地 vs 最优路线 v1.0 <a class="header-anchor" href="#云端vla方案-快速落地-vs-最优路线-v1-0" aria-label="Permalink to &quot;云端VLA方案：快速落地 vs 最优路线 v1.0&quot;">​</a></h1><blockquote><p>聚焦<strong>云端 VLA</strong>在“多源输入 → 统一 Observation → 理解 → 决策”的链路：<br><strong>T0（快速落地）</strong>：复用开源<strong>全模态/多模态</strong>模型直接函数调用生成 <strong>Top-K OptionCards</strong>；<br><strong>T1（最优路线）</strong>：以<strong>冻结 VLM/全模态模型</strong>为理解（Teacher），经<strong>可学习 Connector（如 MetaQuery）<strong>传递特征，驱动</strong>离散高速生成</strong>（Seed/MeanFlow/D2F 等）产生<strong>动作 DSL 序列</strong>，并支持解释异步补齐与<strong>执行绑定</strong>。视觉 <strong>caption 必填、latent 可选但推荐</strong>；TTFT（P95）对外承诺 <strong>≤2s</strong>。</p></blockquote><hr><h2 id="目录-快速定位" tabindex="-1">目录（快速定位） <a class="header-anchor" href="#目录-快速定位" aria-label="Permalink to &quot;目录（快速定位）&quot;">​</a></h2><ul><li><a href="#s0">0. 系统框图</a></li><li><a href="#s1">1. 云端 VLA 建设目标</a></li><li><a href="#s2">2. 云端 VLA 的输入与输出</a><ul><li><a href="#s2-1">2.1 输入（Observation）</a></li><li><a href="#s2-2">2.2 输出（OptionCards + 执行绑定）</a></li></ul></li><li><a href="#t0">3. T0 快速落地</a><ul><li><a href="#t0-1">3.1 基线模型与路线</a></li><li><a href="#t0-2">3.2 函数调用 Schema（示例）</a></li><li><a href="#t0-3">3.3 系统提示词模板（摘录）</a></li><li><a href="#t0-4">3.4 数据与轻量微调</a></li><li><a href="#t0-5">3.5 工程与 SLA（首 token 时延约束）</a></li></ul></li><li><a href="#t1">4. T1 最优方案</a><ul><li><a href="#t1-0">4.0 两阶段总体架构</a></li><li><a href="#t1-1">4.1 多模态信息编码 （From Qwen2.5 Omni）</a></li><li><a href="#t1-2">4.2 特征传输（Connector）设计与训练</a></li><li><a href="#t1-3">4.3 离散高速生成</a></li><li><a href="#t1-4">4.4 数据与蒸馏</a></li><li><a href="#t1-5">4.5 推理与 SLA</a></li></ul></li></ul><hr><p><a id="s0"></a></p><h2 id="_0-系统框图-云端主流程-按-t0-t1-分支" tabindex="-1">0. 系统框图（云端主流程，按 T0 / T1 分支） <a class="header-anchor" href="#_0-系统框图-云端主流程-按-t0-t1-分支" aria-label="Permalink to &quot;0. 系统框图（云端主流程，按 T0 / T1 分支）&quot;">​</a></h2><img width="800" height="417" alt="image" src="'+i+`"><hr><p><a id="s1"></a></p><h2 id="_1-云端-vla-建设目标" tabindex="-1">1. 云端 VLA 建设目标 <a class="header-anchor" href="#_1-云端-vla-建设目标" aria-label="Permalink to &quot;1. 云端 VLA 建设目标&quot;">​</a></h2><p><strong>总体目标</strong></p><p>在端侧已具备就地感知与简单指令能力的前提下，云端 VLA 作为“多源融合—规划与解释—持续学习”的中枢，面向规模化落地与可运营优化，达成以下目标：</p><ul><li><p>1｜多源融合：统一整合车况信号、用户画像、对话历史、端侧视觉摘要/潜特征与知识库，构建标准化 Observation 表示。</p></li><li><p>2｜多步规划：将自然语言与多源上下文转为 动作 DSL 的 Top-K 可执行方案，附 可撤销（Undo） 与解释说明，确保可回放与可审计（工程层面）。</p></li><li><p>3｜高效生成：采用 Teacher（SOTA VLM/全模态）× Student（离散扩散/并行掩码） 的非自回归动作生成路径，显著降低时延并提升一致性。</p></li><li><p>4｜持续学习：将“曝光→点击/拒绝→撤销”沉淀为偏好/奖励信号，进行 RLAIF/DPO 与蒸馏，周期性反哺端侧与云侧。</p></li><li><p>5｜平台化治理：提供 A/B、模型路由、成本/延迟看板与分布漂移监控，支撑持续运营与稳定交付。</p></li></ul><p><a id="s2"></a></p><h2 id="_2-云端-vla-的输入与输出" tabindex="-1">2. 云端 VLA 的输入与输出 <a class="header-anchor" href="#_2-云端-vla-的输入与输出" aria-label="Permalink to &quot;2. 云端 VLA 的输入与输出&quot;">​</a></h2><p><a id="s2-1"></a></p><h3 id="_2-1-输入-observation" tabindex="-1">2.1 输入（Observation） <a class="header-anchor" href="#_2-1-输入-observation" aria-label="Permalink to &quot;2.1 输入（Observation）&quot;">​</a></h3><ul><li><p>视觉：vision.caption ；vision.latent 可选但推荐（最佳效果，低清/潜特征均可）。</p></li><li><p>语音/文本：intent.text（ASR/文本）、intent.conf ∈ [0,1]。</p></li><li><p>车况信号：signals（如 cabin_temp, volume, media_state）。</p></li><li><p>用户画像摘要：profile（温度/音量偏好、勿扰时段等）。</p></li><li><p>历史：history（近 K 轮摘要与最近执行动作）。</p></li><li><p>元信息：scene（如 driving, time_of_day, child_present）、ts, vehicle_id, schema_ver, model_ver, trace_id。 标准结构（示例，最小化）：</p></li></ul><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1735912345123</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;trace_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1689a-...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;scene&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;driving&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;time_of_day&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;night&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;signals&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;speed&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;cabin_temp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">28.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;volume&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;intent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;有点热，调舒服点&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;conf&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.86</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;vision&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;caption&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;后排小孩睡着&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;latent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]}, </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;profile&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;temp_pref&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">24</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;volume_pref&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;history&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;op&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;set_temp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;zone&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;all&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;val&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">25</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}}]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><a id="s2-2"></a></p><h3 id="_2-2-输出-optioncards-执行绑定" tabindex="-1">2.2 输出（OptionCards + 执行绑定） <a class="header-anchor" href="#_2-2-输出-optioncards-执行绑定" aria-label="Permalink to &quot;2.2 输出（OptionCards + 执行绑定）&quot;">​</a></h3><ul><li><p>默认返回 <strong>K=3</strong> 张候选卡片。每张卡片包含：</p><ol><li><strong>title</strong>：方案标题/摘要。</li><li><strong>action_plan</strong>：动作 DSL 序列（受控词表、强类型参数）。</li><li><strong>explanation（可选）</strong>：方案说明与理由。</li><li><strong>undo_plan（可选）</strong>：回滚/补偿动作集合。</li><li><strong>rank_score / confidence</strong>：排序分数与置信度。</li><li><strong>ttl</strong>：有效期（秒）。</li></ol></li></ul><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;cards&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;安静降温（推荐）&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;action_plan&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;op&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;set_temp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;zone&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;all&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;val&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">24</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;op&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;set_fan&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;zone&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;front&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;val&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;op&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;media&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;volume_delta&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;val&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;undo_plan&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;op&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;restore_prev&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;scope&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ac&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;audio&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]}}],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;explanation&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;夜间行车且儿童入睡，优先安静与舒适。&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;rank_score&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.81</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;ttl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;仅降温&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;action_plan&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:[{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;op&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;set_temp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:{</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;zone&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;all&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;val&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">24</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}}]},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;保持不变&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;action_plan&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:[]}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exec_binding&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;dsl_version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;mode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;seq&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;api_namespace&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;HVAC/Media&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}   </span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">#</span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;"> 后端接口</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><p><a id="t0"></a></p><h2 id="_3-t0-快速落地-开源模型直连-自回归生成" tabindex="-1">3. T0 快速落地（开源模型直连，自回归生成） <a class="header-anchor" href="#_3-t0-快速落地-开源模型直连-自回归生成" aria-label="Permalink to &quot;3. T0 快速落地（开源模型直连，自回归生成）&quot;">​</a></h2><p><a id="t0-1"></a></p><h3 id="_3-1-基线模型与路线" tabindex="-1">3.1 基线模型与路线 <a class="header-anchor" href="#_3-1-基线模型与路线" aria-label="Permalink to &quot;3.1 基线模型与路线&quot;">​</a></h3><ul><li><p><strong>候选</strong>：</p><ul><li><strong>Qwen2.5‑Omni</strong>（全模态）、<strong>InternVL3</strong>、<strong>GLM‑4V</strong>（根据可得性/中文表现选择）。</li></ul></li><li><p><strong>方式</strong>：</p><ol><li>将 Observation 摘要化后作为 <strong>系统Prompt + 工具Schema</strong> 输入；</li><li>通过 <strong>函数调用/JSON Schema</strong> 直接产出 Top‑K <code>action_plan[]</code> 与 <code>explanation</code>；</li><li>规则层进行<strong>安全校验与修正</strong>；</li><li>返回 <strong>OptionCards</strong>。</li></ol></li></ul><p><a id="t0-2"></a></p><h3 id="_3-2-函数调用-schema-示例" tabindex="-1">3.2 函数调用 Schema（示例） <a class="header-anchor" href="#_3-2-函数调用-schema-示例" aria-label="Permalink to &quot;3.2 函数调用 Schema（示例）&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;propose_options&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;根据Observation生成3个可执行的候选方案&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;parameters&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;object&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;properties&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;cards&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;array&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;minItems&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;maxItems&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;items&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;object&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;properties&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;action_plan&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;array&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;items&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;expected_effects&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;object&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;risk_tags&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;array&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;items&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;undo_plan&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;array&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;items&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}},</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;explanation&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;required&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;action_plan&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;explanation&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;required&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cards&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><a id="t0-3"></a></p><h3 id="_3-3-系统提示词模板-摘录" tabindex="-1">3.3 系统提示词模板（摘录） <a class="header-anchor" href="#_3-3-系统提示词模板-摘录" aria-label="Permalink to &quot;3.3 系统提示词模板（摘录）&quot;">​</a></h3><p>用于全模态 Observation（<code>vision.caption</code> + 可选 <code>vision.latent/裁剪图</code> + <code>signals</code> + <code>profile</code> + <code>history</code>）的标准提示词，强调“最小变更、可撤销、可执行”，并对单位/范围/冲突做硬性约束。</p><blockquote><p>你是云端 VLA 决策引擎。基于 Observation 的全模态信息<br> （vision.caption + 可选 vision.latent/裁剪图 + signals + profile + history），<br> 在“最小变更、可撤销、可执行”的原则下输出 3 个候选方案（JSON）。<br> 必须包含动作 DSL 序列（action_plan）；explanation/undo_plan 可按时延要求省略或延后补充。<br> 所有数值须符合单位与范围约束，避免相互冲突（如夜间音量上限、行车中限制）。</p></blockquote><p><a id="t0-4"></a></p><h3 id="_3-4-数据与轻量微调" tabindex="-1">3.4 数据与轻量微调 <a class="header-anchor" href="#_3-4-数据与轻量微调" aria-label="Permalink to &quot;3.4 数据与轻量微调&quot;">​</a></h3><ul><li><strong>快速数据集</strong>：构造 <strong>2–10 万</strong>条模板化样本（Observation → 3 候选），结合规则引擎自动标注约束/撤销。</li><li><strong>LoRA/SFT</strong>：小规模微调以稳定<strong>函数调用格式与 DSL 一致性</strong>；上线后以“曝光→点击/拒绝/撤销”日志开展 <strong>RLAIF/DPO</strong> 周期蒸馏。</li><li><strong>latent 适配（可选）</strong>：训练 <strong>latent → embed</strong> 的小型投影层（MLP/线性投影），贴合所选全模态模型的视觉空间。</li></ul><p><a id="t0-5"></a></p><h3 id="_3-5-工程与-sla-首-token-时延约束" tabindex="-1">3.5 工程与 SLA（首 token 时延约束） <a class="header-anchor" href="#_3-5-工程与-sla-首-token-时延约束" aria-label="Permalink to &quot;3.5 工程与 SLA（首 token 时延约束）&quot;">​</a></h3><ul><li><strong>服务框架</strong>：vLLM；启用多模态 KV 缓存与提示裁剪。</li><li><strong>时延目标</strong>：<strong>首 token（P95）≤ 2.0 s</strong>。 <ul><li><strong>流式返回</strong>：先回传卡片骨架（title + action_plan），<code>explanation/undo_plan</code> 异步补齐；</li><li>采用<strong>早触发函数调用（early tool-call）<strong>与</strong>模板压缩</strong>降低首 token 等待。</li></ul></li><li><strong>优点</strong>：改造最小、全模态即插即用；可从图像直传平滑切换到 <em>latent</em> 以降带宽与编解码开销。</li><li><strong>局限</strong>：自回归生成对时延与稳定性敏感，性能受提示与模板设计影响。</li></ul><hr><p><a id="t1"></a></p><h2 id="_4-t1-最优方案-冻结理解-×-可学习中间层传输-×-离散高速生成" tabindex="-1">4. T1 最优方案（冻结理解 × 可学习中间层传输 × 离散高速生成） <a class="header-anchor" href="#_4-t1-最优方案-冻结理解-×-可学习中间层传输-×-离散高速生成" aria-label="Permalink to &quot;4. T1 最优方案（冻结理解 × 可学习中间层传输 × 离散高速生成）&quot;">​</a></h2><p><a id="t1-0"></a></p><h3 id="_4-0-两阶段总体架构" tabindex="-1">4.0 两阶段总体架构 <a class="header-anchor" href="#_4-0-两阶段总体架构" aria-label="Permalink to &quot;4.0 两阶段总体架构&quot;">​</a></h3><blockquote><p>通过冻结 VLM/全模态模型保障高质量理解与低成本稳定性，配合可学习特征传输驱动离散高速生成（4–8 步非自回归）在保持与自回归相当准确度的同时显著降低时延，并具备易扩展、易演进的工程优势。</p></blockquote><ul><li><p><strong>阶段 A｜理解/规划（Frozen Teacher）</strong><br> 采用<strong>冻结的 VLM 或冻结的全模态模型</strong>（如 Qwen2.5-Omni等）完成任务识别、约束抽取与<strong>行动草案</strong> <code>y_draft</code> 生成，同时输出多模态聚合表征 <code>z_c</code>。</p><blockquote><p>为避免大规模预训练，Teacher 默认<strong>不微调</strong>；仅允许极轻量的提示对齐/格式稳定（如少量规则或 LoRA &lt;1% 参与度）。</p></blockquote></li><li><p><strong>阶段间｜特征传输（核心工作）</strong><br> 在 Teacher 与生成器之间引入<strong>可学习中间层（Connector）</strong>，将 <code>z_c</code>（及 <code>y_draft</code> 的结构先验）映射为生成条件 <code>h*</code>。</p><blockquote><p>Connector 可采用 <strong>MetaQuery / Adapter / Trans-Encoder</strong> 等，目标是 <strong>低步数下的强条件对齐</strong> 与 <strong>稳定收敛</strong>。</p></blockquote></li><li><p><strong>阶段 B｜离散高速生成（Student）</strong><br> 在条件 <code>h*</code> 下进行<strong>离散高速生成</strong>，采用离散扩散/并行掩码系列（如 <strong>Seed Diffusion / MeanFlow / D2F Diffusion</strong>），以 <strong>4–8 步非自回归</strong>生成动作 DSL 序列；解释由<strong>小型 LLM 解释头</strong>并行/异步补齐。</p></li></ul><hr><p><a id="t1-1"></a></p><h3 id="_4-1-多模态信息编码-from-qwen2-5-omni" tabindex="-1">4.1 多模态信息编码 （From Qwen2.5 Omni） <a class="header-anchor" href="#_4-1-多模态信息编码-from-qwen2-5-omni" aria-label="Permalink to &quot;4.1 多模态信息编码 （From Qwen2.5 Omni）&quot;">​</a></h3><p><strong>各模态处理</strong></p><ul><li><strong>文本</strong>：Qwen 系 BPE 分词；直接作为 1D 序列供 LLM 消化。</li><li><strong>音频</strong>： <ul><li>统一 16 kHz 重采样 → 128-mel 频谱（窗 25 ms / 步 10 ms）。</li><li>Qwen2-Audio 编码器；时间轴分块注意力；约 40 ms/帧 的时间粒度。</li></ul></li><li><strong>图像/视频</strong><ul><li>ViT 编码器（≈675M）；patch=14。</li><li>2×2 token merge（MLP） 减少视觉 token。</li><li>视频使用动态帧率采样；静态图像视作两帧相同帧以与视频形态对齐。</li><li>支持分块/流式预填；内核加速（如 Flash-Attention）。</li></ul></li></ul><p><strong>多模态对齐与编码（核心：TMRoPE）</strong></p><ul><li><strong>TMRoPE（Time-aligned Multi-modal RoPE）</strong>：将旋转位置编码拆为 Time / Height / Width 三路。 <ul><li><strong>时间对齐</strong>：统一以 40 ms = 1 个时间 ID；视频按真实时间推进；图像同帧内时间 ID 固定。</li><li><strong>空间编码</strong>：视觉 token 按 H/W 网格编号；文本退化为 1D-RoPE。</li></ul></li><li><strong>序列拼接规则</strong>：多模态 token 按块拼接，每种模态的起始位置 ID 为“上一个模态的最大 ID + 1”，避免冲突。</li><li><strong>块内交错</strong>：对“声画同源”的输入，每 2s 一块，块内按“视觉在前，音频在后”交错排列，保障 LLM 在同一注意力窗口内同时接收视听信息。</li><li><strong>融合与推理</strong>：LLM 直接在上述统一序列上做自回归推理，实现端到端跨模态融合与流式生成。</li></ul><img width="2400" height="800" alt="image" src="`+h+'"><p><a id="t1-2"></a></p><h3 id="_4-2-特征传输-connector-设计与训练" tabindex="-1">4.2 特征传输（Connector）设计与训练 <a class="header-anchor" href="#_4-2-特征传输-connector-设计与训练" aria-label="Permalink to &quot;4.2 特征传输（Connector）设计与训练&quot;">​</a></h3><ul><li><p><strong>输入与输出范围</strong>：<br> 支持两类视觉通路：① <em>场景摘要</em>（caption）+ 车况信号；② <em>场景摘要</em> + <em>视觉潜特征</em>（推荐）。Connector 将上述多源信息融合为<strong>生成条件表征</strong>，作为离散生成模块的标准输入。</p></li><li><p><strong>结构设计建议</strong>：</p><ul><li>采用 <strong>MetaQuery</strong> 等可学习查询机制（固定长度查询向量组），跨注意力聚合多源信息；</li><li>连接<strong>轻量投影/归一化</strong>层，产出<strong>定长条件表征</strong>，与离散生成接口无缝对齐；</li><li>兼容不同车型与版本的能力矩阵，提供可配置的词表与参数范围。</li></ul></li><li><p><strong>训练与优化目标</strong>：</p><ol><li><strong>一致性</strong>：确保生成条件能稳定复现“被用户采纳的方案”（点击样本）；</li><li><strong>规划对齐</strong>：保留理解阶段给出的<strong>行动草案</strong>结构先验，减少无效探索；</li><li><strong>平滑传输</strong>：通过最优传输/流匹配（如 Sinkhorn-OT、Rectified-Flow、Noise-Free FM）约束，提升收敛稳定性与少步数可解性；</li><li><strong>语义约束</strong>：对越界参数、非法动作进行<strong>硬屏蔽或惩罚</strong>，确保与车型能力与规则一致。</li></ol></li><li><p><strong>训练流程</strong>：<br> 先在<strong>冻结理解模块</strong>输出的离线数据上<strong>独立训练 Connector</strong>，打牢融合与对齐；随后与<strong>离散高速生成模块</strong>进行<strong>联合微调</strong>（理解模块继续冻结），逐步收敛至<strong>低步数、高精度、强鲁棒</strong>的在线推理路径。</p></li></ul><hr><p><a id="t1-3"></a></p><h3 id="_4-3-离散高速生成" tabindex="-1">4.3 离散高速生成 <a class="header-anchor" href="#_4-3-离散高速生成" aria-label="Permalink to &quot;4.3 离散高速生成&quot;">​</a></h3><ul><li><strong>范式与步数</strong>：离散扩散/并行掩码（如 <strong>Seed / MeanFlow / D2F</strong>），<strong>4–8 步</strong>完成 ≤32 tokens 的动作 DSL 序列。</li><li><strong>目标</strong>：准确性对齐自回归，时延显著降低。</li><li><strong>推理</strong>：并行去噪/并行填充，结合置信度调度；解释由小型 LLM 解释头异步生成，不阻塞动作落地。</li></ul><hr><p><a id="t1-4"></a></p><h3 id="_4-4-数据与蒸馏" tabindex="-1">4.4 数据与蒸馏 <a class="header-anchor" href="#_4-4-数据与蒸馏" aria-label="Permalink to &quot;4.4 数据与蒸馏&quot;">​</a></h3><ul><li><p><strong>数据来源</strong>：</p><ol><li><strong>现有业务数据改造</strong>：将已有交互日志、车控操作轨迹和场景标签重新整理为 Observation → 候选方案的训练样本；</li><li><strong>线上数据回流</strong>：采集用户真实交互数据（包含点击、拒绝、撤销），经统一清洗与脱敏后进入训练管线；</li><li><strong>规则补充</strong>：利用规则引擎生成变体样本，并加入反事实样本作为负例，提升模型对约束和异常场景的鲁棒性。</li></ol></li><li><p><strong>蒸馏路径</strong>：</p><ul><li>来自 Teacher 的规划与解释，蒸馏至 Connector 与小型解释头，提升一致性与生成稳定性；</li><li>来自线上数据的偏好反馈（点击 / 拒绝 / 撤销），转化为奖励与排序信号，引导离散生成器优化输出质量与偏好对齐。</li></ul></li></ul><hr><p><a id="t1-5"></a></p><h3 id="_4-5-推理与-sla" tabindex="-1">4.5 推理与 SLA <a class="header-anchor" href="#_4-5-推理与-sla" aria-label="Permalink to &quot;4.5 推理与 SLA&quot;">​</a></h3><ul><li><p><strong>推理链路</strong>：<br> Observation → 冻结理解（VLM/Omni，产出场景表征与行动草案） → Connector（可学习中间层，生成条件表征） → 离散高速生成（产出 <code>action_plan</code>） → 规则/执行绑定校验 → （可选异步）解释返回。</p></li><li><p><strong>性能目标（更贴近实际）</strong>：</p><ul><li><strong>理解阶段（冻结 VLM/Omni）</strong>：P95 <strong>400–800 ms</strong>（含多模态编码与草案生成）；</li><li><strong>Connector</strong>：P95 <strong>10–30 ms</strong>；</li><li><strong>离散生成（4–8 步）</strong>：P95 <strong>80–180 ms</strong>；</li><li><strong>后处理/校验/序列化</strong>：P95 <strong>20–60 ms</strong>；</li><li><strong>网络与排队开销（云侧内网 + 客户端RTT）</strong>：P95 <strong>120–300 ms</strong>；</li><li><strong>端到端（E2E）目标</strong>：P95 <strong>0.9–1.3 s</strong>。</li></ul></li><li><p><strong>时延与可用性约束</strong>：</p><ul><li><strong>首 Token（TTFT）P95 ≤ 2.0 s</strong>；</li><li><strong>可用性</strong>：错误率 ≤ <strong>1.5%</strong>。</li></ul></li><li><p><strong>达标手段</strong>：</p><ul><li><strong>流式返回</strong>：优先返回 <code>title + action_plan</code>，<code>explanation</code> 异步补齐；</li><li><strong>早触发工具调用（early tool-call）</strong> 与 <strong>提示压缩/模板片段缓存</strong>；</li><li><strong>多模态 KV 缓存</strong>、热点场景特征缓存（caption/latent→embed）；</li><li><strong>小型解释头</strong>并行生成，避免阻塞动作落地；</li><li><strong>弹性并发</strong>与限速：Teacher 与生成器分层扩缩容，峰值场景降级为保守单步方案。</li></ul></li></ul>',74)])])}const y=a(k,[["render",p]]);export{F as __pageData,y as default};
