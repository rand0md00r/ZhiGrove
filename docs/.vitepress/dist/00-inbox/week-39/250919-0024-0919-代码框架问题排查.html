<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>今日排查日志（2025-09-19，Asia/Taipei） | ZhiGrove</title>
    <meta name="description" content="Wang Yaqi's Knowledge Base">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.BhX5jokk.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.GWSF0Fav.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.DQSJWTrN.js">
    <link rel="modulepreload" href="/assets/chunks/framework.CQuhCYrb.js">
    <link rel="modulepreload" href="/assets/00-inbox_week-39_250919-0024-0919-代码框架问题排查.md.BPGxg1yy.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/" data-v-1168a8e4><!--[--><!--]--><!----><span data-v-1168a8e4>ZhiGrove</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/00-inbox/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>收件箱</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/10-knowledge/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>知识库</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/20-papers/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>论文</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/30-ideas/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>灵感</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/40-experiments/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>实验</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/50-reports/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>报告</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/wangyaqi/ZhiGrove" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/wangyaqi/ZhiGrove" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 has-active" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>Inbox</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>README</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>week-34</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-34/TRIAGE.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>TRIAGE</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>week-35</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-35/TRIAGE.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>TRIAGE</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>week-36</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-36/TRIAGE.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>TRIAGE</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>week-37</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-37/250908-0020-MoE%20llama%E7%BB%93%E6%9E%84.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>250908-0020-MoE llama结构</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-37/250908-0020-clip%E6%8D%9F%E5%A4%B1.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>250908-0020-clip损失</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-37/250908-0020-siglip%E6%8D%9F%E5%A4%B1.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>250908-0020-siglip损失</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-37/250909-0023-dino%E8%AF%AD%E4%B9%89%E7%9B%91%E7%9D%A3.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>250909-0023-dino语义监督</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-37/250910-0024-clip-siglip-vicreg%E6%8D%9F%E5%A4%B1%E5%8C%BA%E5%88%AB%E4%B8%8E%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>250910-0024-clip-siglip-vicreg损失区别与适用场景</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-37/250910-0024-%E8%AE%AD%E7%BB%83loss%E8%B0%83%E8%AF%95%E6%80%9D%E8%B7%AF.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>250910-0024-训练loss调试思路</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>week-38</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-38/250918-0024-0916talk.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>250918-0024-0916talk</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-38/250920-0022-check_code.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>250920-0022-check_code</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed has-active" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>week-39</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-39/250919-0024-0919-%E4%BB%A3%E7%A0%81%E6%A1%86%E6%9E%B6%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>250919-0024-0919-代码框架问题排查</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-39/250924-0024-0922-ocr-TODOlist.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>250924-0024-0922-ocr-TODOlist</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-39/250925-0025-0923-%E5%A4%8D%E7%8E%B0crossflow.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>250925-0025-0923-复现crossflow</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-39/250925-0025-%E8%AF%AD%E4%B9%89%E8%B0%83%E9%9F%B3.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>250925-0025-语义调音</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>week-41</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-41/251010-0025-0922-ocr-TODOlist.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>251010-0025-0922-ocr-TODOlist</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-41/251010-0025-0923-%E5%A4%8D%E7%8E%B0crossflow.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>251010-0025-0923-复现crossflow</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-41/251010-0025-dots_ocr%E6%9C%8D%E5%8A%A1%E9%83%A8%E7%BD%B2%20&amp;%20%E8%B0%83%E7%94%A8.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>251010-0025-dots_ocr服务部署 & 调用</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-41/251010-0025-laion400m%E8%AE%AD%E7%BB%83%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>251010-0025-laion400m训练数据处理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-41/251010-0025-%E8%AF%AD%E4%B9%89%E8%B0%83%E9%9F%B3.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>251010-0025-语义调音</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>week-45</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-45/251027-1431-VLA-VLA%E8%B0%83%E7%A0%94%E5%88%86%E4%BA%AB.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>251027-1431-VLA-VLA调研分享</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-45/251104-1431-OCR%E4%BB%BB%E5%8A%A1-docx%E7%AD%89%E6%A0%BC%E5%BC%8F%E6%96%87%E6%A1%A3%E6%A3%80%E6%B5%8B.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>251104-1431-OCR任务-docx等格式文档检测</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-45/251104-1431-VLA-%E6%89%A9%E6%95%A3%E7%94%9F%E6%88%90%E8%B0%83%E7%A0%94.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>251104-1431-VLA-扩散生成调研</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-45/251104-1431-VLA-%E7%BB%BC%E8%BF%B0%E8%AE%BA%E6%96%87%E8%8A%82%E9%80%89%E7%BF%BB%E8%AF%91-0925%E5%8F%91%E5%B8%83.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>251104-1431-VLA-综述论文节选翻译-0925发布</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>week-46</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-46/251111-0027-k%E7%BA%BF%E8%AE%B0%E5%BF%86%E5%8D%A1.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>251111-0027-k线记忆卡</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>week-50</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-50/251113-1650-%E8%87%AA%E5%8A%A8%E4%BA%A4%E6%98%93%E7%AD%96%E7%95%A5%E5%AE%9E%E7%8E%B0log.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>251113-1650-自动交易策略实现log</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-50/251211-1650-JiT%E8%AE%BA%E6%96%87-%E8%A7%86%E9%A2%91%E8%A6%81%E7%82%B9.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>251211-1650-JiT论文-视频要点</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-50/251211-1650-TRM%E5%BA%94%E7%94%A8%E4%BA%8EVLA.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>251211-1650-TRM应用于VLA</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-50/251211-1650-TRM%E5%BA%94%E7%94%A8%E5%A4%A7%E7%BA%B2.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>251211-1650-TRM应用大纲</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-50/251211-1650-TRM%E8%AE%BA%E6%96%87%E7%B2%BE%E8%AF%BB%E7%AC%94%E8%AE%B0.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>251211-1650-TRM论文精读笔记</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-50/251211-1650-VAE%E5%8E%9F%E7%90%86.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>251211-1650-VAE原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-50/251211-1650-deepseekV3_2.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>251211-1650-deepseekV3_2</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-50/251211-1650-rustdesk%E5%AE%89%E8%A3%85%E5%8F%8A%E9%85%8D%E7%BD%AE.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>251211-1650-rustdesk安装及配置</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-50/251211-1650-%E5%9B%BE%E5%83%8F%E7%94%9F%E6%88%90%E5%9F%BA%E5%BA%A7%E6%A8%A1%E5%9E%8B%E8%B0%83%E7%A0%94.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>251211-1650-图像生成基座模型调研</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/00-inbox/week-50/251211-1650-%E5%9C%BA%E6%99%AF%E7%90%86%E8%A7%A3%E5%88%86%E7%B1%BB%E5%8A%9F%E8%83%BD.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>251211-1650-场景理解分类功能</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _00-inbox_week-39_250919-0024-0919-%E4%BB%A3%E7%A0%81%E6%A1%86%E6%9E%B6%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5" data-v-39a288b8><div><h1 id="今日排查日志-2025-09-19-asia-taipei" tabindex="-1">今日排查日志（2025-09-19，Asia/Taipei） <a class="header-anchor" href="#今日排查日志-2025-09-19-asia-taipei" aria-label="Permalink to &quot;今日排查日志（2025-09-19，Asia/Taipei）&quot;">​</a></h1><h2 id="背景" tabindex="-1">背景 <a class="header-anchor" href="#背景" aria-label="Permalink to &quot;背景&quot;">​</a></h2><ul><li><strong>现象</strong>：训练到 <strong>26k iters</strong>（此前 3k 等阶段也测过），推理端仍呈现“彩色纹理/油画感”，缺乏清晰语义。</li><li><strong>目标</strong>：先<strong>锁定推理链路正确性</strong>，再评估训练是否学到语义。</li></ul><hr><h2 id="关键代码调整" tabindex="-1">关键代码调整 <a class="header-anchor" href="#关键代码调整" aria-label="Permalink to &quot;关键代码调整&quot;">​</a></h2><ul><li>在 <code>generate()</code> 内实现<strong>极简欧拉采样</strong>（均匀 <code>dt</code>，<code>t∈[0,1]</code>，<code>log_snr=4-8t</code>，先<strong>关闭 CFG</strong>），并加入探针输出 <code>[A]/[B]/[C]</code>。</li><li><strong>统一 VAE 尺度</strong>：依据 <code>FrozenAutoencoderKL</code>（<code>sample()</code> 内 *sf、<code>decode()</code> 内 /sf），<strong>外部不再额外乘/除 <code>scale_factor</code></strong>。</li><li>增加调试旋钮：时间方向 <code>time_dir</code>、步长放大 <code>dt_scale</code>、FM 前<strong>方差对齐</strong>、以及（候选）FM 前向 <strong>fp32</strong>。</li></ul><hr><h2 id="实验与证据" tabindex="-1">实验与证据 <a class="header-anchor" href="#实验与证据" aria-label="Permalink to &quot;实验与证据&quot;">​</a></h2><h3 id="_1-vae-编解码冒烟-通过-✅" tabindex="-1">1) VAE 编解码冒烟（通过 ✅） <a class="header-anchor" href="#_1-vae-编解码冒烟-通过-✅" aria-label="Permalink to &quot;1) VAE 编解码冒烟（通过 ✅）&quot;">​</a></h3><ul><li><code>pixels_to_latents / latents_to_pixels</code> 自测： <ul><li><code>z</code> 统计：<strong>range [-4.500, 5.562], mean -0.014, var 1.414</strong></li><li>重建像素：<strong>range [0.000, 0.992]，PSNR=29.08 dB</strong></li></ul></li><li><strong>结论</strong>：VAE 尺度/前后处理正常。</li></ul><h3 id="_2-scale-factor-行为确认-通过-✅" tabindex="-1">2) <code>scale_factor</code> 行为确认（通过 ✅） <a class="header-anchor" href="#_2-scale-factor-行为确认-通过-✅" aria-label="Permalink to &quot;2) `scale_factor` 行为确认（通过 ✅）&quot;">​</a></h3><ul><li>现象：<code>decode(z)</code> 清晰，<code>decode(z * sf)</code> 变糊。</li><li>结合实现（<code>decode()</code> 内部已 <code>/ sf</code>）→ 外部<strong>不要再</strong>乘/除 <code>sf</code>。</li><li><strong>结论</strong>：推理端直接 <code>decode(z)</code>。</li></ul><h3 id="_3-生成端探针-样例" tabindex="-1">3) 生成端探针（样例） <a class="header-anchor" href="#_3-生成端探针-样例" aria-label="Permalink to &quot;3) 生成端探针（样例）&quot;">​</a></h3><ul><li><code>[A] decode(z_init)</code>：范围合理，但对比度偏低。</li><li><code>[B] first |Δz|_rms ≈ 2.6e-3 ~ 7.8e-3</code>：<strong>速度场在动</strong>。</li><li><code>[C] decode(z_end)</code>：范围 [0,1]，但画面仍“油画/纹理感”。</li></ul><h3 id="_4-文本通路有效性-通过-✅" tabindex="-1">4) 文本通路有效性（通过 ✅） <a class="header-anchor" href="#_4-文本通路有效性-通过-✅" aria-label="Permalink to &quot;4) 文本通路有效性（通过 ✅）&quot;">​</a></h3><ul><li><code>cos(z_text)</code>： <ul><li><code>cos(cat, car)=0.098</code></li><li><code>cos(cat, apple)=0.114</code></li><li><code>cos(car, apple)=0.108</code></li></ul></li><li><strong>结论</strong>：不同 prompt 的文本嵌入可区分，文本通路正常。</li></ul><h3 id="_5-fm-单步对齐-薄弱-❌" tabindex="-1">5) FM 单步对齐（薄弱 ❌） <a class="header-anchor" href="#_5-fm-单步对齐-薄弱-❌" aria-label="Permalink to &quot;5) FM 单步对齐（薄弱 ❌）&quot;">​</a></h3><ul><li>在 <code>t=0.10/0.37/0.63/0.90</code>： <ul><li><code>cos(v_pred, v_tgt)=0.050/0.045/0.036/0.015</code>（方向弱）</li><li><code>||pred||/||tgt||≈0.28~0.30</code>（<strong>幅值约小 3.4×</strong>）</li></ul></li><li><strong>结论</strong>：FM 速度场偏弱且幅值系统性偏小。</li></ul><h3 id="_6-对着真图射击-x0-→-x1-失败-❌" tabindex="-1">6) “对着真图射击”（x0 → x1，失败 ❌） <a class="header-anchor" href="#_6-对着真图射击-x0-→-x1-失败-❌" aria-label="Permalink to &quot;6) “对着真图射击”（x0 → x1，失败 ❌）&quot;">​</a></h3><ul><li>用<strong>学到的</strong>速度场积分：<code>MSE(z_end, x1)=4.531</code>（误差大）。</li></ul><h3 id="_7-教师场欧拉验证-通过-✅" tabindex="-1">7) 教师场欧拉验证（通过 ✅） <a class="header-anchor" href="#_7-教师场欧拉验证-通过-✅" aria-label="Permalink to &quot;7) 教师场欧拉验证（通过 ✅）&quot;">​</a></h3><ul><li>使用 <code>Dt_psi</code> 欧拉积分（0→1）： <ul><li><code>N=100 → 1.51e-02</code></li><li><code>N=50 → 3.41e-03</code></li><li><code>N=20 → 5.84e-04</code></li><li><code>N=10 → 1.54e-04</code></li><li><code>N=5 → 5.42e-05</code></li></ul></li><li><strong>结论</strong>：<code>psi/Dt_psi</code> 与欧拉调度实现正确，采样调度 OK。</li></ul><hr><h2 id="诊断结论" tabindex="-1">诊断结论 <a class="header-anchor" href="#诊断结论" aria-label="Permalink to &quot;诊断结论&quot;">​</a></h2><ul><li><strong>VAE 正常</strong>、<strong>调度正确</strong>、<strong>文本条件有效</strong>。</li><li><strong>瓶颈在 FM</strong>：预测速度场方向弱、幅值偏小（≈0.29× 目标），导致采样“走不动”，出图只剩纹理。</li></ul><hr><h2 id="临时修复-推理侧" tabindex="-1">临时修复（推理侧） <a class="header-anchor" href="#临时修复-推理侧" aria-label="Permalink to &quot;临时修复（推理侧）&quot;">​</a></h2><ul><li>在 <code>generate()</code>： <ul><li><strong>FM 前向用 fp32</strong>（避免 bf16 压幅值）。</li><li>对 <code>v_pred</code> 乘全局增益 <strong><code>fm_gain ≈ 3.5</code></strong>（由 <code>1/0.29</code> 估计）。</li><li>可选扫 <code>dt_scale ∈ {1, 2, 3}</code> 和 <code>time_dir ∈ {0-&gt;1, 1-&gt;0}</code>，选最清晰者。</li></ul></li><li>目的：<strong>先让链路跑起来</strong>，观察训练进度对生成质量的影响。</li></ul><hr><h2 id="后续计划-建议按序" tabindex="-1">后续计划（建议按序） <a class="header-anchor" href="#后续计划-建议按序" aria-label="Permalink to &quot;后续计划（建议按序）&quot;">​</a></h2><ol><li><strong>推理验证（短期）</strong><ul><li>用 <code>fm_gain=3.5, use_fp32_fm=True, num_steps=150, 256px, 无CFG</code> 出一批固定 prompt 图。</li><li>再跑“射击到 x1”（同样乘 <code>fm_gain</code> + fp32），期望 <code>MSE</code> 明显小于 <strong>4.53</strong>。</li></ul></li><li><strong>自动标定 fm_gain（可选）</strong><ul><li>用少量 (x_img, prompt) 估计 <code>median(||v_tgt||/||v_pred||)</code>，固定为部署常数。</li></ul></li><li><strong>训练侧修复（中期）</strong><ul><li>提高 <strong>FM 损失权重</strong> 或提升 <strong>FM 子网 LR</strong>；</li><li>加 <strong>norm 对齐损失</strong>：<code>λ * (||v_pred|| - ||v_tgt||)^2</code>；</li><li>让 <strong>FM 模块用 fp32</strong> 训练（或在混精度中强制 FM 层 fp32）；</li><li>继续训练并复测单步对齐/射击 MSE。</li></ul></li></ol><hr><h2 id="产物-记录" tabindex="-1">产物/记录 <a class="header-anchor" href="#产物-记录" aria-label="Permalink to &quot;产物/记录&quot;">​</a></h2><ul><li>VAE 回环图：<code>orig.png / recon_wrap.png / recon_direct.png</code></li><li>生成探针截图与读数（<code>[A]/[B]/[C]</code>）</li><li>文本 cos、FM 单步对齐 cos/ratio、射击 MSE、Teacher-Euler MSE 曲线</li></ul><blockquote><p>当前状态：<strong>推理链路（VAE/调度/文本）可信</strong>，<strong>FM 需要“打气”</strong>。先用推理侧增益 + fp32 验证可行，再把修复回灌训练。</p></blockquote><hr><blockquote><p>下面是相关debug 代码块</p></blockquote><h1 id="_1-文本通路是否真的在起作用" tabindex="-1">1) 文本通路是否真的在起作用 <a class="header-anchor" href="#_1-文本通路是否真的在起作用" aria-label="Permalink to &quot;1) 文本通路是否真的在起作用&quot;">​</a></h1><p>不同 prompt 的 <code>z_text</code> 如果几乎一致，后面再怎么采样都出不来语义。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@torch.no_grad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> dbg_text_cos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model, prompts</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a cat&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a car&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a red apple&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    zs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> prompts:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        tok </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.tokenizer(p, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">return_tensors</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;pt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).to(model.device)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        q_meta </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.meta_queries[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].expand(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, model.num_queries, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).to(model.device, model.dtype)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        llm_in </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.prepare_forward_input(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">q_meta, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">input_ids</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tok.input_ids, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">attention_mask</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">torch.ones_like(tok.input_ids))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        hs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.llm.model(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">llm_in, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">return_dict</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).last_hidden_state</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        q_tokens </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hs[:, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">model.num_queries:]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        q_mask </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> torch.ones(q_tokens.shape[:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">device</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">model.device, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dtype</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">torch.bool)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        z_text, _, _ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.text_ve_encoder(q_tokens, q_mask)   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># (1,4096)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        zs.append(z_text)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> torch.nn.functional </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> F</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(zs)):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> j </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(zs)):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> F.cosine_similarity(zs[i], zs[j], </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dim</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).mean().item()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;[text] cos(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prompts[i]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prompts[j]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">) = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:.3f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><strong>判读</strong></p><ul><li>cos &lt; 0.9：区分度还可以 ✅</li><li>cos ≈ 1：文本几乎没进来（检查 LLM 拼接/TransEncoder/重参数化是否过强噪声）。</li></ul><hr><h1 id="_2-单步对齐测试-v-pred-vs-v-target-和训练完全同形" tabindex="-1">2) 单步对齐测试：<code>v_pred</code> vs <code>v_target</code>（和训练完全同形） <a class="header-anchor" href="#_2-单步对齐测试-v-pred-vs-v-target-和训练完全同形" aria-label="Permalink to &quot;2) 单步对齐测试：`v_pred` vs `v_target`（和训练完全同形）&quot;">​</a></h1><p>用一张真实图（与其文本）做单步“对齐度”测试，直接告诉你 <strong>FM 模型有没有学到正确方向</strong>。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@torch.no_grad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> dbg_fm_single_step</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model, pixel_values, input_ids, attention_mask, n_t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    device, dtype </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.device, model.dtype</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # x1: 图像latent（与训练一致 256×256）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    x_img </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> F.interpolate(pixel_values.to(device, dtype), </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">256</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">256</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">mode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bilinear&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">align_corners</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    x1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.pixels_to_latents(x_img)                </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># (B,4,32,32)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # x0: 文本latent</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    q_meta </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.meta_queries[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].expand(input_ids.size(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), model.num_queries, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).to(device, dtype)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    llm_in </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.prepare_forward_input(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">q_meta, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">input_ids</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">input_ids.to(device), </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">attention_mask</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">attention_mask.to(device))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    hs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.llm.model(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">llm_in, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">return_dict</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).last_hidden_state</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    q_tokens </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hs[:, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">model.num_queries:]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    q_mask </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> torch.ones(q_tokens.shape[:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">device</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">device, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dtype</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">torch.bool)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    z_text, _, _ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.text_ve_encoder(q_tokens, q_mask)      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># (B,4096)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    x0 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> einops.rearrange(z_text, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b (c h w)-&gt; b c h w&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">h</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x1.shape[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">w</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x1.shape[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]).to(dtype)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 采样几个t</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> torch</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> src.models.openuni.fm_utils </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> psi, Dt_psi</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    sigma_min, sigma_max </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.sigma_min, model.sigma_max</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x1.size(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> torch.linspace(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, n_t, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">device</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">device, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dtype</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dtype)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ts:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        t_vec </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> torch.full((B,), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">float</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(t), </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">device</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">device, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dtype</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dtype)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        x_t </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> psi(t_vec, x0, x1, sigma_min, sigma_max).to(dtype)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        v_tgt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Dt_psi(t_vec, x0, x1, sigma_min, sigma_max)      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 目标速度</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        log_snr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4.0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8.0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t_vec</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        v_pred </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.fm_transformers(x_t, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">log_snr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">log_snr, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">null_indicator</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">torch.zeros(B, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dtype</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">torch.bool, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">device</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">device))[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 计算对齐度（cos &amp; 比例）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> v_pred.flatten(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).float(); b </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> v_tgt.flatten(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).float()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        cos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (F.normalize(a,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dim</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> F.normalize(b,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dim</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)).sum(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).mean().item()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ratio </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (a.norm(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dim</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.norm(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dim</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1e-8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)).mean().item()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;[fm] t=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{float</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(t)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:.2f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  cos(v_pred, v_tgt)=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cos</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:.3f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  ||pred||/||tgt||=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ratio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:.3f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><strong>判读</strong></p><ul><li>cos 明显 &gt; 0（理想 ≥0.5）且 ratio 在 0.5~2 之间 → 学到方向 ✅</li><li>cos ≈ 0 或负数、ratio 极小/极大 → <strong>FM 模型没学到</strong>（训练不够/训练设置或 dtype/forward 有误）。</li></ul><hr><h1 id="_3-对着真图射击-从-x0-积分到-x1-教师驱动版" tabindex="-1">3) “对着真图射击”：从 x0 积分到 x1（教师驱动版） <a class="header-anchor" href="#_3-对着真图射击-从-x0-积分到-x1-教师驱动版" aria-label="Permalink to &quot;3) “对着真图射击”：从 x0 积分到 x1（教师驱动版）&quot;">​</a></h1><p>看能否把同一张图从文本 latent 积到该图 latent（不是生成，只是验证 ODE/调度是否工作）。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@torch.no_grad</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> dbg_shoot_to_x1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model, pixel_values, input_ids, attention_mask, num_steps</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, dt_scale</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    device, dtype </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.device, model.dtype</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    x_img </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> F.interpolate(pixel_values.to(device, dtype), </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">256</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">256</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">mode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bilinear&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">align_corners</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    x1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.pixels_to_latents(x_img)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># target</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # x0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    q_meta </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.meta_queries[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].expand(input_ids.size(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), model.num_queries, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).to(device, dtype)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    llm_in </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.prepare_forward_input(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">q_meta, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">input_ids</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">input_ids.to(device), </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">attention_mask</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">attention_mask.to(device))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    hs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.llm.model(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">llm_in, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">return_dict</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).last_hidden_state</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    q_tokens </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hs[:, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">model.num_queries:]; q_mask </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> torch.ones(q_tokens.shape[:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">device</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">device, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dtype</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">torch.bool)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    z_text,_,_ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.text_ve_encoder(q_tokens, q_mask)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    z </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> einops.rearrange(z_text, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b (c h w)-&gt; b c h w&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">h</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x1.shape[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">w</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x1.shape[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]).to(dtype)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 最简欧拉（与训练同：log_snr=4-8t，0-&gt;1）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    N</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(num_steps)); dt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">N)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">float</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dt_scale)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    B</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">z.size(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">torch.zeros(B, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dtype</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">torch.bool, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">device</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">device)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(N):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        t </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> torch.full((B,), (i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">N, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">device</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">device, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dtype</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dtype)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        log_snr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4.0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8.0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> model.fm_transformers(z, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">log_snr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">log_snr, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">null_indicator</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">null)[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        z </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> z </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dt</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 看和 x1 的距离</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> F.mse_loss(z.float(), x1.float()).item()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;[shoot] MSE(z_end, x1) = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:.6f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><strong>判读</strong></p><ul><li><code>MSE(z_end,x1)</code> 随步数或 <code>dt_scale</code> 能明显下降（哪怕到 1e-2 ~ 1e-3）→ ODE 链路 OK ✅</li><li>基本不降 → 还是 <strong>FM 场学得不对/力度太小/方向错</strong>。</li></ul><h1 id="调试结果" tabindex="-1">调试结果： <a class="header-anchor" href="#调试结果" aria-label="Permalink to &quot;调试结果：&quot;">​</a></h1><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1）文本通路结果：</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[text] cos(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cat,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> car</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) = 0.098</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[text] cos(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cat,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> red</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) = 0.114</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[text] cos(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> car,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> red</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) = 0.108</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2）单步对齐测试：</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[fm] t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">0.10</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  cos(v_pred,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v_tgt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)=0.050  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pred</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tgt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=0.287</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[fm] t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">0.37</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  cos(v_pred,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v_tgt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)=0.045  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pred</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tgt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=0.296</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[fm] t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">0.63</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  cos(v_pred,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v_tgt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)=0.036  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pred</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tgt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=0.286</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[fm] t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">0.90</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  cos(v_pred,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v_tgt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)=0.015  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pred</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tgt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">=0.282</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3）“对着真图射击”：从</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> x0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 积分到</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> x1（教师驱动版）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[shoot] MSE(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">z_end,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> x1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) = 4.531314</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/00-inbox/week-38/250920-0022-check_code.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Previous page</span><span class="title" data-v-e257564d>250920-0022-check_code</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/00-inbox/week-39/250924-0024-0922-ocr-TODOlist.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Next page</span><span class="title" data-v-e257564d>250924-0024-0922-ocr-TODOlist</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>Released under the MIT License.</p><p class="copyright" data-v-e315a0ad>Copyright © 2025 Wang Yaqi</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"00-inbox_index.md\":\"BxMK2y0K\",\"00-inbox_readme.md\":\"RyqrPFdx\",\"00-inbox_week-34_triage.md\":\"DVk_gK-E\",\"00-inbox_week-35_triage.md\":\"CJ7x_I7h\",\"00-inbox_week-36_triage.md\":\"Bw37u8Cj\",\"00-inbox_week-37_250908-0020-clip损失.md\":\"D6cejIoN\",\"00-inbox_week-37_250908-0020-moe llama结构.md\":\"_N3i4Vl_\",\"00-inbox_week-37_250908-0020-siglip损失.md\":\"DuDR7RnK\",\"00-inbox_week-37_250909-0023-dino语义监督.md\":\"Dx3ylhPa\",\"00-inbox_week-37_250910-0024-clip-siglip-vicreg损失区别与适用场景.md\":\"C2M3PCzT\",\"00-inbox_week-37_250910-0024-训练loss调试思路.md\":\"CGjZKtrV\",\"00-inbox_week-38_250918-0024-0916talk.md\":\"CAnJpmsX\",\"00-inbox_week-38_250920-0022-check_code.md\":\"B8OVOP6a\",\"00-inbox_week-39_250919-0024-0919-代码框架问题排查.md\":\"BPGxg1yy\",\"00-inbox_week-39_250924-0024-0922-ocr-todolist.md\":\"B57-S-36\",\"00-inbox_week-39_250925-0025-0923-复现crossflow.md\":\"cxp65mul\",\"00-inbox_week-39_250925-0025-语义调音.md\":\"Cmh-y7Ll\",\"00-inbox_week-41_251010-0025-0922-ocr-todolist.md\":\"CoLfL63b\",\"00-inbox_week-41_251010-0025-0923-复现crossflow.md\":\"DKn9e9Z3\",\"00-inbox_week-41_251010-0025-dots_ocr服务部署 _ 调用.md\":\"CsnpHxq_\",\"00-inbox_week-41_251010-0025-laion400m训练数据处理.md\":\"BkdfG2q1\",\"00-inbox_week-41_251010-0025-语义调音.md\":\"C8I2YM0Z\",\"00-inbox_week-45_251027-1431-vla-vla调研分享.md\":\"DiWBICAy\",\"00-inbox_week-45_251104-1431-ocr任务-docx等格式文档检测.md\":\"ClznCRj-\",\"00-inbox_week-45_251104-1431-vla-扩散生成调研.md\":\"Dc_BUAti\",\"00-inbox_week-45_251104-1431-vla-综述论文节选翻译-0925发布.md\":\"DlcaK2ts\",\"00-inbox_week-46_251111-0027-k线记忆卡.md\":\"CjGZKdiV\",\"00-inbox_week-50_251113-1650-自动交易策略实现log.md\":\"C0_jSP06\",\"00-inbox_week-50_251211-1650-deepseekv3_2.md\":\"CW71BT6n\",\"00-inbox_week-50_251211-1650-jit论文-视频要点.md\":\"wGtIpzah\",\"00-inbox_week-50_251211-1650-rustdesk安装及配置.md\":\"b3esiVId\",\"00-inbox_week-50_251211-1650-trm应用于vla.md\":\"-yGNCErp\",\"00-inbox_week-50_251211-1650-trm应用大纲.md\":\"CnrnC4gM\",\"00-inbox_week-50_251211-1650-trm论文精读笔记.md\":\"BpdLK_Tu\",\"00-inbox_week-50_251211-1650-vae原理.md\":\"BYNqrid7\",\"00-inbox_week-50_251211-1650-图像生成基座模型调研.md\":\"DGL06d4n\",\"00-inbox_week-50_251211-1650-场景理解分类功能.md\":\"CpvDMYk-\",\"10-knowledge_250822-0737-重启训练一个半小时内不开始训-overview.md\":\"Chmk5W5x\",\"10-knowledge_250826-0737-i2i训练方案-overview.md\":\"ndnUB9Hh\",\"10-knowledge_250826-0737-openuni训练方法-overview.md\":\"Bz71xLqy\",\"10-knowledge_250827-0736-token熵-overview.md\":\"B1Mv5o5q\",\"10-knowledge_250827-0736-扩散过程中打印数值-overview.md\":\"2CZHDGmA\",\"10-knowledge_250828-0735-fm_transformers模型参数-overview.md\":\"BZZWEWfO\",\"10-knowledge_250829-0735-困惑度-overview.md\":\"BQF8-SBk\",\"10-knowledge_250829-0735-惊讶度-overview.md\":\"DlUdKycc\",\"10-knowledge_250830-0735-pipeline检查-overview.md\":\"DfRDzeKl\",\"10-knowledge_250903-0735-macos快捷操作.md\":\"DGlbZob2\",\"10-knowledge_250906-0735-vicreg监督.md\":\"DRzQqJ3b\",\"10-knowledge_250906-0735-投影层方案.md\":\"7iWiO02D\",\"10-knowledge_250907-0735-特征解耦方案gpt参考.md\":\"UwEg4l-R\",\"10-knowledge_example-knowledge.md\":\"D90jZDvZ\",\"10-knowledge_index.md\":\"DX2HZJ0R\",\"10-knowledge_readme.md\":\"DEZ7OggO\",\"20-papers_2025_2025-08-20-.md\":\"OPzruvQ2\",\"20-papers_2025_2025-08-20-vtla-preference-learning.md\":\"Dz6vUCR_\",\"20-papers_250829-0735-qwen2.5-omni论文阅读.md\":\"BUa0mMWP\",\"20-papers_index.md\":\"CgQW4AZg\",\"20-papers_vla_all_papers.md\":\"5XYncC_w\",\"30-ideas_2025_9月_250826-0737-与弘扬讨论-overview.md\":\"BNUaUdAg\",\"30-ideas_2025_9月_250826-0737-现有模型结构可改进点-overview.md\":\"BUFGBCsU\",\"30-ideas_2025_9月_250827-0736-0826-与弘扬沟通-overview.md\":\"BJckJ-Fw\",\"30-ideas_2025_9月_250829-0735-中间层模型方案梳理-overview.md\":\"BB7Rf6Gc\",\"30-ideas_2025_9月_250829-0735-论文理论包装方案.md\":\"DK30ycFI\",\"30-ideas_2025_9月_250904-0735-多轮对话拓展idea-overview.md\":\"B_AZd7pL\",\"30-ideas_2025_9月_250906-0735-0905_今日晨思.md\":\"DeW5zvzz\",\"30-ideas_2025_9月_250907-0735-梦梦的建议.md\":\"b2uAz91C\",\"30-ideas_2025_9月_week36-论文实验idea汇总.md\":\"DO5mY2KW\",\"30-ideas_index.md\":\"BLsaRW7n\",\"40-experiments_250826-0736-0826测评日志.md\":\"Ceca8mbE\",\"40-experiments_250902-0735-0901实验分析.md\":\"l-G-GhLH\",\"40-experiments_250904-0735-exp_card_0903_transencodder.md\":\"NlMuTFDx\",\"40-experiments_250904-0735-实验日志模板.md\":\"B9zK1IYR\",\"40-experiments_exp_card_0908_dinov2.md\":\"3Vfhs2r5\",\"40-experiments_index.md\":\"sKDrNhTt\",\"50-reports_250820-0754-ocr调研.md\":\"CJ40cd-y\",\"50-reports_250827-0736-高熵强化学习.md\":\"DC-sefpp\",\"50-reports_250901-0735-resume.md\":\"DtNSBA5Y\",\"50-reports_250903-0735-座舱vla端云协同方案.md\":\"C4iR_FDg\",\"50-reports_index.md\":\"BaF-7d1_\",\"50-reports_resume_250901-0735-resume_network.md\":\"CxyKg_Il\",\"50-reports_座舱vla端云协同方案.md\":\"DuVATegy\",\"50-reports_文本扩散模型调研.md\":\"DEi7WSBa\",\"50-reports_训练与部署资源申请书.md\":\"DUY8Bcs6\",\"50-reports_近期发布模型调研-0908.md\":\"Q46srq98\",\"50-reports_长视频理解综述.md\":\"BseMc13e\",\"50-reports_高熵rl - 数据构建增益.md\":\"DU4AIY7y\",\"index.md\":\"CEbDhJUx\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"ZhiGrove\",\"description\":\"Wang Yaqi's Knowledge Base\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"收件箱\",\"link\":\"/00-inbox/\"},{\"text\":\"知识库\",\"link\":\"/10-knowledge/\"},{\"text\":\"论文\",\"link\":\"/20-papers/\"},{\"text\":\"灵感\",\"link\":\"/30-ideas/\"},{\"text\":\"实验\",\"link\":\"/40-experiments/\"},{\"text\":\"报告\",\"link\":\"/50-reports/\"}],\"sidebar\":{\"/00-inbox/\":[{\"text\":\"Inbox\",\"items\":[{\"text\":\"README\",\"link\":\"/00-inbox/\"},{\"text\":\"week-34\",\"collapsed\":true,\"items\":[{\"text\":\"TRIAGE\",\"link\":\"/00-inbox/week-34/TRIAGE\"}]},{\"text\":\"week-35\",\"collapsed\":true,\"items\":[{\"text\":\"TRIAGE\",\"link\":\"/00-inbox/week-35/TRIAGE\"}]},{\"text\":\"week-36\",\"collapsed\":true,\"items\":[{\"text\":\"TRIAGE\",\"link\":\"/00-inbox/week-36/TRIAGE\"}]},{\"text\":\"week-37\",\"collapsed\":true,\"items\":[{\"text\":\"250908-0020-MoE llama结构\",\"link\":\"/00-inbox/week-37/250908-0020-MoE llama结构\"},{\"text\":\"250908-0020-clip损失\",\"link\":\"/00-inbox/week-37/250908-0020-clip损失\"},{\"text\":\"250908-0020-siglip损失\",\"link\":\"/00-inbox/week-37/250908-0020-siglip损失\"},{\"text\":\"250909-0023-dino语义监督\",\"link\":\"/00-inbox/week-37/250909-0023-dino语义监督\"},{\"text\":\"250910-0024-clip-siglip-vicreg损失区别与适用场景\",\"link\":\"/00-inbox/week-37/250910-0024-clip-siglip-vicreg损失区别与适用场景\"},{\"text\":\"250910-0024-训练loss调试思路\",\"link\":\"/00-inbox/week-37/250910-0024-训练loss调试思路\"}]},{\"text\":\"week-38\",\"collapsed\":true,\"items\":[{\"text\":\"250918-0024-0916talk\",\"link\":\"/00-inbox/week-38/250918-0024-0916talk\"},{\"text\":\"250920-0022-check_code\",\"link\":\"/00-inbox/week-38/250920-0022-check_code\"}]},{\"text\":\"week-39\",\"collapsed\":true,\"items\":[{\"text\":\"250919-0024-0919-代码框架问题排查\",\"link\":\"/00-inbox/week-39/250919-0024-0919-代码框架问题排查\"},{\"text\":\"250924-0024-0922-ocr-TODOlist\",\"link\":\"/00-inbox/week-39/250924-0024-0922-ocr-TODOlist\"},{\"text\":\"250925-0025-0923-复现crossflow\",\"link\":\"/00-inbox/week-39/250925-0025-0923-复现crossflow\"},{\"text\":\"250925-0025-语义调音\",\"link\":\"/00-inbox/week-39/250925-0025-语义调音\"}]},{\"text\":\"week-41\",\"collapsed\":true,\"items\":[{\"text\":\"251010-0025-0922-ocr-TODOlist\",\"link\":\"/00-inbox/week-41/251010-0025-0922-ocr-TODOlist\"},{\"text\":\"251010-0025-0923-复现crossflow\",\"link\":\"/00-inbox/week-41/251010-0025-0923-复现crossflow\"},{\"text\":\"251010-0025-dots_ocr服务部署 & 调用\",\"link\":\"/00-inbox/week-41/251010-0025-dots_ocr服务部署 & 调用\"},{\"text\":\"251010-0025-laion400m训练数据处理\",\"link\":\"/00-inbox/week-41/251010-0025-laion400m训练数据处理\"},{\"text\":\"251010-0025-语义调音\",\"link\":\"/00-inbox/week-41/251010-0025-语义调音\"}]},{\"text\":\"week-45\",\"collapsed\":true,\"items\":[{\"text\":\"251027-1431-VLA-VLA调研分享\",\"link\":\"/00-inbox/week-45/251027-1431-VLA-VLA调研分享\"},{\"text\":\"251104-1431-OCR任务-docx等格式文档检测\",\"link\":\"/00-inbox/week-45/251104-1431-OCR任务-docx等格式文档检测\"},{\"text\":\"251104-1431-VLA-扩散生成调研\",\"link\":\"/00-inbox/week-45/251104-1431-VLA-扩散生成调研\"},{\"text\":\"251104-1431-VLA-综述论文节选翻译-0925发布\",\"link\":\"/00-inbox/week-45/251104-1431-VLA-综述论文节选翻译-0925发布\"}]},{\"text\":\"week-46\",\"collapsed\":true,\"items\":[{\"text\":\"251111-0027-k线记忆卡\",\"link\":\"/00-inbox/week-46/251111-0027-k线记忆卡\"}]},{\"text\":\"week-50\",\"collapsed\":true,\"items\":[{\"text\":\"251113-1650-自动交易策略实现log\",\"link\":\"/00-inbox/week-50/251113-1650-自动交易策略实现log\"},{\"text\":\"251211-1650-JiT论文-视频要点\",\"link\":\"/00-inbox/week-50/251211-1650-JiT论文-视频要点\"},{\"text\":\"251211-1650-TRM应用于VLA\",\"link\":\"/00-inbox/week-50/251211-1650-TRM应用于VLA\"},{\"text\":\"251211-1650-TRM应用大纲\",\"link\":\"/00-inbox/week-50/251211-1650-TRM应用大纲\"},{\"text\":\"251211-1650-TRM论文精读笔记\",\"link\":\"/00-inbox/week-50/251211-1650-TRM论文精读笔记\"},{\"text\":\"251211-1650-VAE原理\",\"link\":\"/00-inbox/week-50/251211-1650-VAE原理\"},{\"text\":\"251211-1650-deepseekV3_2\",\"link\":\"/00-inbox/week-50/251211-1650-deepseekV3_2\"},{\"text\":\"251211-1650-rustdesk安装及配置\",\"link\":\"/00-inbox/week-50/251211-1650-rustdesk安装及配置\"},{\"text\":\"251211-1650-图像生成基座模型调研\",\"link\":\"/00-inbox/week-50/251211-1650-图像生成基座模型调研\"},{\"text\":\"251211-1650-场景理解分类功能\",\"link\":\"/00-inbox/week-50/251211-1650-场景理解分类功能\"}]}]}],\"/10-knowledge/\":[{\"text\":\"Knowledge\",\"items\":[{\"text\":\"README\",\"link\":\"/10-knowledge/\"},{\"text\":\"250822-0737-重启训练一个半小时内不开始训-overview\",\"link\":\"/10-knowledge/250822-0737-重启训练一个半小时内不开始训-overview\"},{\"text\":\"250826-0737-OpenUni训练方法-overview\",\"link\":\"/10-knowledge/250826-0737-OpenUni训练方法-overview\"},{\"text\":\"250826-0737-i2i训练方案-overview\",\"link\":\"/10-knowledge/250826-0737-i2i训练方案-overview\"},{\"text\":\"250827-0736-token熵-overview\",\"link\":\"/10-knowledge/250827-0736-token熵-overview\"},{\"text\":\"250827-0736-扩散过程中打印数值-overview\",\"link\":\"/10-knowledge/250827-0736-扩散过程中打印数值-overview\"},{\"text\":\"250828-0735-fm_transformers模型参数-overview\",\"link\":\"/10-knowledge/250828-0735-fm_transformers模型参数-overview\"},{\"text\":\"250829-0735-困惑度-overview\",\"link\":\"/10-knowledge/250829-0735-困惑度-overview\"},{\"text\":\"250829-0735-惊讶度-overview\",\"link\":\"/10-knowledge/250829-0735-惊讶度-overview\"},{\"text\":\"250830-0735-pipeline检查-overview\",\"link\":\"/10-knowledge/250830-0735-pipeline检查-overview\"},{\"text\":\"250903-0735-macos快捷操作\",\"link\":\"/10-knowledge/250903-0735-macos快捷操作\"},{\"text\":\"250906-0735-VICReg监督\",\"link\":\"/10-knowledge/250906-0735-VICReg监督\"},{\"text\":\"250906-0735-投影层方案\",\"link\":\"/10-knowledge/250906-0735-投影层方案\"},{\"text\":\"250907-0735-特征解耦方案GPT参考\",\"link\":\"/10-knowledge/250907-0735-特征解耦方案GPT参考\"},{\"text\":\"example-knowledge\",\"link\":\"/10-knowledge/example-knowledge\"}]}],\"/20-papers/\":[{\"text\":\"Papers\",\"items\":[{\"text\":\"README\",\"link\":\"/20-papers/\"},{\"text\":\"250829-0735-Qwen2.5-Omni论文阅读\",\"link\":\"/20-papers/250829-0735-Qwen2.5-Omni论文阅读\"},{\"text\":\"2025\",\"collapsed\":true,\"items\":[{\"text\":\"2025-08-20-\",\"link\":\"/20-papers/2025/2025-08-20-\"},{\"text\":\"2025-08-20-vtla-preference-learning\",\"link\":\"/20-papers/2025/2025-08-20-vtla-preference-learning\"}]},{\"text\":\"vla\",\"collapsed\":true,\"items\":[{\"text\":\"all_papers\",\"link\":\"/20-papers/vla/all_papers\"}]}]}],\"/30-ideas/\":[{\"text\":\"Ideas\",\"items\":[{\"text\":\"README\",\"link\":\"/30-ideas/\"},{\"text\":\"2025\",\"collapsed\":true,\"items\":[{\"text\":\"9月\",\"collapsed\":true,\"items\":[{\"text\":\"250826-0737-与弘扬讨论-overview\",\"link\":\"/30-ideas/2025/9月/250826-0737-与弘扬讨论-overview\"},{\"text\":\"250826-0737-现有模型结构可改进点-overview\",\"link\":\"/30-ideas/2025/9月/250826-0737-现有模型结构可改进点-overview\"},{\"text\":\"250827-0736-0826-与弘扬沟通-overview\",\"link\":\"/30-ideas/2025/9月/250827-0736-0826-与弘扬沟通-overview\"},{\"text\":\"250829-0735-中间层模型方案梳理-overview\",\"link\":\"/30-ideas/2025/9月/250829-0735-中间层模型方案梳理-overview\"},{\"text\":\"250829-0735-论文理论包装方案\",\"link\":\"/30-ideas/2025/9月/250829-0735-论文理论包装方案\"},{\"text\":\"250904-0735-多轮对话拓展idea-overview\",\"link\":\"/30-ideas/2025/9月/250904-0735-多轮对话拓展idea-overview\"},{\"text\":\"250906-0735-0905_今日晨思\",\"link\":\"/30-ideas/2025/9月/250906-0735-0905_今日晨思\"},{\"text\":\"250907-0735-梦梦的建议\",\"link\":\"/30-ideas/2025/9月/250907-0735-梦梦的建议\"},{\"text\":\"week36-论文实验idea汇总\",\"link\":\"/30-ideas/2025/9月/week36-论文实验idea汇总\"}]}]}]}],\"/40-experiments/\":[{\"text\":\"Experiments\",\"items\":[{\"text\":\"README\",\"link\":\"/40-experiments/\"},{\"text\":\"250826-0736-0826测评日志\",\"link\":\"/40-experiments/250826-0736-0826测评日志\"},{\"text\":\"250902-0735-0901实验分析\",\"link\":\"/40-experiments/250902-0735-0901实验分析\"},{\"text\":\"250904-0735-exp_card_0903_transencodder\",\"link\":\"/40-experiments/250904-0735-exp_card_0903_transencodder\"},{\"text\":\"250904-0735-实验日志模板\",\"link\":\"/40-experiments/250904-0735-实验日志模板\"},{\"text\":\"exp_card_0908_dinov2\",\"link\":\"/40-experiments/exp_card_0908_dinov2\"}]}],\"/50-reports/\":[{\"text\":\"Reports\",\"items\":[{\"text\":\"README\",\"link\":\"/50-reports/\"},{\"text\":\"250820-0754-OCR调研\",\"link\":\"/50-reports/250820-0754-OCR调研\"},{\"text\":\"250827-0736-高熵强化学习\",\"link\":\"/50-reports/250827-0736-高熵强化学习\"},{\"text\":\"250901-0735-resume\",\"link\":\"/50-reports/250901-0735-resume\"},{\"text\":\"250903-0735-座舱VLA端云协同方案\",\"link\":\"/50-reports/250903-0735-座舱VLA端云协同方案\"},{\"text\":\"座舱VLA端云协同方案\",\"link\":\"/50-reports/座舱VLA端云协同方案\"},{\"text\":\"文本扩散模型调研\",\"link\":\"/50-reports/文本扩散模型调研\"},{\"text\":\"训练与部署资源申请书\",\"link\":\"/50-reports/训练与部署资源申请书\"},{\"text\":\"近期发布模型调研-0908\",\"link\":\"/50-reports/近期发布模型调研-0908\"},{\"text\":\"长视频理解综述\",\"link\":\"/50-reports/长视频理解综述\"},{\"text\":\"高熵RL - 数据构建增益\",\"link\":\"/50-reports/高熵RL - 数据构建增益\"},{\"text\":\"resume\",\"collapsed\":true,\"items\":[{\"text\":\"250901-0735-resume_network\",\"link\":\"/50-reports/resume/250901-0735-resume_network\"}]}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/wangyaqi/ZhiGrove\"}],\"search\":{\"provider\":\"local\"},\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright © 2025 Wang Yaqi\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>