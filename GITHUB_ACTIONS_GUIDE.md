# 🚀 GitHub Actions 功能说明

## 📋 已配置的Actions功能

### 1. 🔄 自动索引更新 (`auto-update-index.yml`)

**触发时机**：
- 每次推送Markdown文件到main/master分支时
- 手动触发（workflow_dispatch）

**功能说明**：
- 自动运行 `python scripts/build_index.py`
- 更新README.md中的近期更新部分
- 自动提交并推送索引变更
- 避免无限循环（使用 `[skip ci]` 标记）

**使用方式**：
```bash
# 推送代码后自动触发
git add .
git commit -m "Add new content"
git push

# 手动触发（在GitHub界面）
# Actions → Auto Update Index → Run workflow
```

### 2. 📊 内容统计报告 (`content-stats.yml`)

**触发时机**：
- 每周日凌晨3点自动运行
- 手动触发（workflow_dispatch）

**功能说明**：
- 统计各目录的文件数量
- 分析知识库健康状态
- 生成本周改进建议
- 上传报告为Artifact

**报告内容**：
- 📥 收件箱状态分析
- 📚 知识库内容统计
- 📄 论文笔记数量
- 💡 想法记录统计
- 🔬 实验记录数量
- 📊 报告数量统计
- 💡 个性化改进建议

**查看报告**：
1. 在GitHub Actions页面查看执行结果
2. 下载 `content-stats` Artifact
3. 根据建议进行内容优化

### 3. 📅 周日工作流提醒 (`weekly-reminder.yml`)

**触发时机**：
- 每周日上午9点自动运行
- 手动触发（workflow_dispatch）

**功能说明**：
- 自动创建周提醒Issue
- 包含完整的任务清单
- 提供快速操作命令
- 设置本周目标

**提醒内容**：
- 📥 收件箱整理任务（优先级：⭐⭐⭐）
- 🔗 内容关联任务（优先级：⭐⭐）
- 📚 知识沉淀任务（优先级：⭐⭐）
- 📋 下周计划任务（优先级：⭐）

**Issue标签**：
- `reminder` - 提醒类型
- `weekly` - 周度提醒
- `workflow` - 工作流相关

### 4. 🗂️ 自动收件箱整理 (`auto-organize-inbox.yml`)

**触发时机**：
- 每天早上6点自动运行
- 手动触发（workflow_dispatch）

**功能说明**：
- 自动整理收件箱中的临时md文件
- 按周次组织到对应目录
- 重命名文件为时间戳格式
- 自动提交整理结果

**整理规则**：
- **目录结构**：`00-inbox/week-XX/`（XX为周次）
- **文件命名**：`[YYMMDD-HHMM]topic.md`
- **时间格式**：读取文件创建时间
- **示例**：`[250815-1424]vlm.md`

**使用方式**：
```bash
# 在收件箱创建文件
echo "# 我的想法" > 00-inbox/topic.md

# 每天早上6点自动整理
# 文件会被移动到: 00-inbox/week-34/[250815-1424]topic.md

# 手动测试（本地）
./scripts/quick_start.sh test-organize
```

## 🎯 工作流程集成

### 自动化工作流
```
📝 编写内容 → 🔄 自动索引更新 → 📊 周日统计报告 → 📅 下周提醒
    ↓              ↓                    ↓                ↓
推送代码        更新README          生成报告        创建任务清单

📥 收件箱记录 → 🗂️ 每日自动整理 → 📁 按周次组织 → 🏷️ 时间戳命名
    ↓              ↓                    ↓                ↓
快速记录        早上6点整理        周目录结构        标准文件名
```

### 时间安排
- **每日早上6点**：自动整理收件箱
- **每日**：推送代码时自动更新索引
- **周日凌晨3点**：生成内容统计报告
- **周日上午9点**：创建工作流提醒

## 🛠️ 使用建议

### 1. **日常使用**
- 在收件箱快速记录想法（`topic.md`）
- 正常编写和推送内容
- Actions会自动处理整理和索引更新

### 2. **收件箱管理**
- 每天创建 `00-inbox/topic.md` 文件
- 早上6点自动整理到对应周目录
- 文件名自动添加时间戳

### 3. **周日整理时间**
- 查看统计报告，了解知识库状态
- 按照提醒Issue完成任务
- 使用快速命令提高效率

### 4. **手动触发**
- 需要立即更新索引时
- 想要查看当前统计时
- 需要创建提醒时
- 测试自动整理功能时

## 📱 查看和下载

### 查看执行结果
1. 访问仓库的Actions页面
2. 选择对应的workflow
3. 查看执行日志和结果

### 下载报告
1. 在Actions页面找到成功的执行
2. 点击Artifacts部分
3. 下载 `content-stats` 文件

### 查看提醒
1. 在Issues页面查看提醒
2. 使用标签筛选 `reminder` 和 `weekly`
3. 按照任务清单执行

### 测试自动整理
```bash
# 本地测试
./scripts/quick_start.sh test-organize

# 查看整理结果
ls 00-inbox/week-*/
```

## 🔧 故障排除

### 常见问题

**1. 索引更新失败**
- 检查Python脚本是否正常
- 确认文件权限设置
- 查看详细错误日志

**2. 统计报告为空**
- 检查目录结构是否正确
- 确认Markdown文件存在
- 查看执行日志

**3. 提醒Issue未创建**
- 检查仓库权限设置
- 确认GitHub Actions已启用
- 查看错误日志

**4. 自动整理失败**
- 检查文件创建时间是否可读
- 确认目录权限设置
- 查看文件移动日志

### 调试技巧
- 使用手动触发测试功能
- 查看详细的执行日志
- 检查文件路径和权限
- 使用本地测试脚本

## 💡 最佳实践

### 1. **保持目录结构**
- 确保目录命名正确
- 维护一致的Markdown格式
- 定期清理无用文件

### 2. **合理使用标签**
- 为Issue添加合适的标签
- 使用标签进行分类管理
- 定期整理标签体系

### 3. **定期检查状态**
- 每周查看统计报告
- 及时处理提醒任务
- 保持知识库健康状态

### 4. **收件箱管理**
- 每天记录想法到收件箱
- 使用简洁的文件名
- 让Actions自动整理

## 🧪 测试功能

### 本地测试
```bash
# 测试自动整理功能
./scripts/quick_start.sh test-organize

# 查看周次计算
python scripts/calculate_week.py
```

### 手动触发
- 在GitHub界面手动触发各个workflow
- 用于测试功能和立即执行
- 检查执行日志和结果

---

**这些Actions将帮助您自动化知识库管理，让您专注于内容创作而不是维护工作！**
